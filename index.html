<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>picx-images-hosting - 静态索引</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/hoochanlon/fonts@refs/heads/main/public/OPPOSans4/result.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./css/global.css" />
  <script src="./config.js"></script>
  <script src="./js/dark-mode.js"></script>
  <script src="./js/index-config.js"></script>
  <!-- 加载认证模块（如果存在） -->
  <script src="./js/upload-auth-oauth.js"></script>
  <script src="./js/index-auth.js"></script>
  <script src="./js/index-elements.js"></script>
  <script src="./js/index-state.js"></script>
  <script src="./js/index-utils.js"></script>
  <script src="./js/index-api.js"></script>
  <script src="./js/index-folders.js"></script>
  <script src="./js/index-lazy-load.js"></script>
  <script src="./js/index-lightbox.js"></script>
  <script src="./js/index-render.js"></script>
  <script src="./js/index-filter.js"></script>
  <script src="./js/index-load.js"></script>
  <script src="./js/index-upload.js"></script>
  <script src="./js/index-collapsible.js"></script>
  <script src="./js/index-events.js"></script>
  <script src="./js/index-init.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="emoji">🖼️</span>
      <span class="title" id="brand-title" style="cursor: pointer;">picx-images-hosting</span>
    </div>
    <div class="controls">
      <div class="folder-control-group">
        <label for="folder" class="icon-label toggle-control" data-target="folder-control">
          <i class="fas fa-folder"></i>
        </label>
        <div class="custom-select-wrapper collapsible" id="folder-control">
          <div class="custom-select" id="folder-select">
            <div class="custom-select-trigger">
              <span class="custom-select-value">全部目录</span>
              <i class="fas fa-chevron-down custom-select-arrow"></i>
            </div>
            <div class="custom-select-options" id="folder-options">
              <div class="custom-select-option" data-value="ALL">全部目录</div>
            </div>
          </div>
          <select id="folder" style="display: none;">
            <option value="ALL">全部目录</option>
          </select>
        </div>
      </div>
      <label for="filter" class="icon-label toggle-control" data-target="filter-control">
        <i class="fas fa-search"></i>
      </label>
      <div class="collapsible" id="filter-control">
        <input id="filter" type="search" placeholder="输入关键词过滤" />
      </div>
      <label for="open-upload" class="icon-label">
        <i class="fas fa-cloud-upload-alt"></i>
      </label>
      <button id="open-upload" type="button" style="display: none;"></button>
      <a href="upload.html" class="icon-label">
        <i class="fas fa-tasks"></i>
      </a>
      <button id="auth-login-btn" class="icon-label" type="button" aria-label="登录/授权">
        <i class="fas fa-lock" id="auth-login-icon"></i>
      </button>
      <label for="reload-btn" class="icon-label">
        <i class="fas fa-sync"></i>
      </label>
      <button id="reload-btn" type="button" style="display: none;"></button>
      <a href="tutorial.html" class="icon-label">
        <i class="fas fa-book"></i>
      </a>
      <button class="dark-mode-toggle icon-label">
        <i class="fas fa-moon"></i>
      </button>
      <a id="github-link" href="#" target="_blank" rel="noopener noreferrer" class="icon-label">
        <i class="fab fa-github"></i>
      </a>
    </div>
  </header>

  <main class="container">
    <section id="status" class="status">正在加载仓库树...</section>
    <section id="grid" class="grid" aria-live="polite"></section>
  </main>

  <button id="back-to-top" class="back-to-top" aria-label="回到顶部" title="回到顶部">
    <i class="fas fa-arrow-up"></i>
  </button>

  <div id="lightbox" class="lightbox hidden" aria-modal="true" role="dialog">
    <div class="lightbox-backdrop" data-close></div>
    <div class="lightbox-body">
      <button class="lightbox-close lightbox-control-btn" aria-label="关闭" data-close>×</button>
      <div class="lightbox-img-wrap">
        <button class="lightbox-nav prev lightbox-control-btn" aria-label="上一张">←</button>
        <img id="lightbox-img" alt="预览大图" />
        <button class="lightbox-nav next lightbox-control-btn" aria-label="下一张">→</button>
      </div>
      <div class="lightbox-zoom">
        <button id="toggle-controls" type="button" aria-label="切换控制按钮"><i class="fas fa-eye-slash lightbox-icon-outline"></i></button>
        <button id="info-btn" class="lightbox-control-btn" type="button" aria-label="图片信息"><i class="fas fa-info-circle lightbox-icon-outline"></i></button>
        <button id="fullscreen-toggle" class="lightbox-control-btn" type="button" aria-label="全屏切换">⛶</button>
        <button id="zoom-reset" class="lightbox-control-btn" type="button">1:1</button>
        <button id="rotate" class="lightbox-control-btn" type="button">⟳</button>
      </div>
      <div id="lightbox-info" class="lightbox-info hidden" aria-live="polite">
        <div class="lightbox-info-title">图片信息</div>
        <div id="lightbox-info-content" class="lightbox-info-code"></div>
      </div>
    </div>
  </div>

  <div id="upload-modal" class="upload-modal hidden" aria-modal="true" role="dialog">
    <div class="upload-modal-backdrop" data-close-upload></div>
    <div class="upload-modal-content">
      <div class="upload-modal-header">
        <h2>上传文件</h2>
        <button class="upload-modal-close" aria-label="关闭" data-close-upload>×</button>
      </div>
      <div class="upload-modal-body">
        <div class="upload-form-group">
          <label for="upload-file">选择文件：</label>
          <div class="file-input-wrapper">
            <input id="upload-file" type="file" multiple />
            <button type="button" class="file-input-button" id="file-input-trigger">
              <i class="fas fa-folder-open"></i>
              选择文件
            </button>
            <span class="file-input-text" id="file-input-text">未选择任何文件</span>
          </div>
          <div id="upload-file-list" class="upload-file-list" style="display: none;"></div>
        </div>
        <div class="upload-form-group">
          <label for="upload-path">保存到：</label>
          <input id="upload-path" type="text" placeholder="例如 imgs/2025/" />
          <p class="upload-tip">路径留空默认存入 <span id="default-path-display">imgs/uploads/kate/</span></p>
        </div>
        <div class="upload-form-group">
          <label for="default-upload-path">设置默认路径：</label>
          <div class="default-path-setting">
            <input id="default-upload-path" type="text" placeholder="例如 imgs/uploads/kate/" />
            <button id="save-default-path" type="button" class="btn-secondary">保存</button>
          </div>
          <p class="upload-tip">设置后，下次上传时路径留空将使用此默认路径</p>
        </div>
        <div class="upload-form-group">
          <p class="upload-tip">文件经 Vercel Serverless 调用 GitHub API，前端不存 token。</p>
        </div>
      </div>
      <div class="upload-modal-footer">
        <button id="upload-btn" type="button" class="btn-primary">上传</button>
        <button id="cancel-upload" type="button" class="btn-secondary" data-close-upload>取消</button>
      </div>
    </div>
  </div>

  <template id="card-template">
    <article class="card">
      <div class="meta-top">
        <div class="path" title=""></div>
      </div>
      <div class="thumb">
        <img loading="lazy" alt="" />
      </div>
      <div class="meta">
        <div class="actions-row">
          <button class="btn" type="button" data-copy="pages">链接复制</button>
          <button class="btn" type="button" data-copy="cdn">CDN 复制</button>
          <button class="btn danger delete-btn" type="button">删除</button>
        </div>
      </div>
    </article>
  </template>

</body>
</html>